<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Refatoração PSO Binário - Trabalho</title>
<style>
  /* Reset básico */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0; background: #f7f9fc; color: #222;
    line-height: 1.6;
  }
  header {
    background: #007acc;
    color: white;
    padding: 1.2rem 2rem;
    text-align: center;
  }
  main {
    max-width: 900px;
    margin: 2rem auto;
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
  }
  h1, h2, h3 {
    color: #007acc;
  }
  section + section {
    margin-top: 2.5rem;
  }
  pre {
    background: #282c34;
    color: #abb2bf;
    padding: 1rem;
    border-radius: 6px;
    font-size: 0.9rem;
    overflow-x: auto;
    max-height: 300px;
  }
  code {
    font-family: 'Source Code Pro', monospace, monospace;
    white-space: pre-wrap;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 1rem;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 0.5rem 0.75rem;
    text-align: left;
  }
  th {
    background-color: #007acc;
    color: white;
  }
  button.toggle-btn {
    margin-top: 0.5rem;
    background: #007acc;
    border: none;
    color: white;
    padding: 0.4rem 0.8rem;
    cursor: pointer;
    border-radius: 4px;
  }
  button.toggle-btn:hover {
    background: #005fa3;
  }
  .code-block {
    display: none;
    margin-top: 1rem;
  }
  .active {
    display: block !important;
  }
  .diff-table td {
    font-family: monospace;
    white-space: pre;
  }
  .diff-old {
    background: #ffe6e6;
    color: #a33;
  }
  .diff-new {
    background: #e6ffe6;
    color: #2a6;
  }
  img.graph {
    max-width: 100%;
    margin-top: 1rem;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
  }
</style>
</head>
<body>
<header>
  <h1>Refatoração do Código PSO Binário para o Problema da Mochila</h1>
  <p>Apresentação do Trabalho - Otimização e Qualidade de Código</p>
</header>

<main>
  <section id="objetivo">
    <h2>Objetivo</h2>
    <p>Refatorar o código do PSO binário aplicado ao problema da mochila para melhorar legibilidade, modularização, testes e manutenção, mantendo o comportamento original.</p>
  </section>

  <section id="o-que-foi-refatorado">
    <h2>O que foi Refatorado</h2>
    <ul>
      <li>Organização do código em classes e funções mais coesas</li>
      <li>Criação de testes unitários para garantir comportamento</li>
      <li>Uso de boas práticas como mensagens claras em commits e controle de versões</li>
      <li>Ajuste no teste <code>test_sigmoid</code> para tolerância numérica</li>
      <li>Documentação estruturada e geração de slides para apresentação</li>
    </ul>
  </section>

  <section id="como-foi-refatorado">
    <h2>Como Foi Refatorado</h2>
    <p>O código original, que era um script funcional único, foi organizado em:</p>
    <ul>
      <li>Uma classe <code>KnapsackProblem</code> para encapsular dados e métodos</li>
      <li>Módulos separados para lógica e testes</li>
      <li>Uso do <code>pytest</code> para testes unitários</li>
      <li>Controle de versão via Git com commits atômicos e branchs específicas</li>
      <li>Aplicação de ferramentas estáticas de análise (<code>flake8</code>, <code>pylint</code>)</li>
    </ul>
  </section>

  <section id="comparacao-nomes">
    <h2>Comparação de Nomes Antes e Depois</h2>
    <table class="diff-table">
      <thead>
        <tr>
          <th>Nome Original</th>
          <th>Nome Refatorado</th>
          <th>Descrição</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>avaliar()</code></td>
          <td><code>KnapsackProblem.evaluate()</code></td>
          <td>Função de avaliação do valor da solução</td>
        </tr>
        <tr>
          <td><code>calcular_peso()</code></td>
          <td><code>KnapsackProblem.calculate_weight()</code></td>
          <td>Cálculo do peso total da solução</td>
        </tr>
        <tr>
          <td><code>sigmoid()</code></td>
          <td><code>KnapsackProblem.sigmoid()</code></td>
          <td>Função sigmoide para binarização da posição</td>
        </tr>
        <tr>
          <td><code>gerar_instancia()</code></td>
          <td><code>KnapsackProblem.generate_instance()</code></td>
          <td>Geração de instância do problema</td>
        </tr>
        <tr>
          <td><code>pso_mochila()</code></td>
          <td><code>KnapsackProblem.solve_pso()</code></td>
          <td>Algoritmo PSO para o problema da mochila</td>
        </tr>
        <tr>
          <td><code>executar_testes()</code></td>
          <td><code>test_knapsack_pso.py (pytest)</code></td>
          <td>Testes unitários automatizados</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section id="exemplos-codigo">
    <h2>Exemplos de Código Antes x Depois</h2>

    <h3>Função de Avaliação</h3>
    <button class="toggle-btn" data-target="code-eval">Mostrar Código</button>
    <pre class="code-block" id="code-eval"><code>
# Código Original
def avaliar(solucao, valores, pesos, capacidade):
    peso_total = sum(pesos[i] for i in range(len(solucao)) if solucao[i] == 1)
    valor_total = sum(valores[i] for i in range(len(solucao)) if solucao[i] == 1)
    if peso_total > capacidade:
        return 0
    return valor_total

# Código Refatorado (simplificado)
class KnapsackProblem:
    def evaluate(self, solution):
        peso_total = sum(peso for sol, peso in zip(solution, self.weights) if sol == 1)
        valor_total = sum(valor for sol, valor in zip(solution, self.values) if sol == 1)
        if peso_total > self.capacity:
            return 0
        return valor_total
    </code></pre>

    <h3>Função Sigmoid</h3>
    <button class="toggle-btn" data-target="code-sigmoid">Mostrar Código</button>
    <pre class="code-block" id="code-sigmoid"><code>
# Código Original
def sigmoid(x):
    return 1 / (1 + math.exp(-x))

# Código Refatorado (método estático)
class KnapsackProblem:
    @staticmethod
    def sigmoid(x):
        return 1 / (1 + math.exp(-x))
    </code></pre>

    <h3>Execução PSO</h3>
    <button class="toggle-btn" data-target="code-pso">Mostrar Código</button>
    <pre class="code-block" id="code-pso"><code>
# Código Original (função pso_mochila)
def pso_mochila(valores, pesos, capacidade, n_particulas=30, n_iteracoes=50, c1=1.5, c2=1.5, w=0.8):
    # ... código omitido para brevidade ...
    pass

# Código Refatorado (método solve_pso)
class KnapsackProblem:
    def solve_pso(self, n_particles=30, n_iterations=50, c1=1.5, c2=1.5, w=0.8):
        # ... código omitido para brevidade ...
        pass
    </code></pre>
  </section>

  <section id="grafico">
    <h2>Gráfico da Evolução do Fitness</h2>
    <img src="fitness_evolution.png" alt="Gráfico da Evolução do Fitness" class="graph" />
  </section>

</main>

<script>
  // Script para toggle dos blocos de código
  document.querySelectorAll('button.toggle-btn').forEach(button => {
    button.addEventListener('click', () => {
      const targetId = button.getAttribute('data-target');
      const block = document.getElementById(targetId);
      if (block.classList.contains('active')) {
        block.classList.remove('active');
        button.textContent = 'Mostrar Código';
      } else {
        block.classList.add('active');
        button.textContent = 'Esconder Código';
      }
    });
  });
</script>
</body>
</html>
